<script src="eon-x-eonify.js"></script>
<script>
window.xEonify.eon({anitem, time: undefined})

// ... ** **
// ... # license
// ... MIT

// .................. anitem
async function anitem (__mapper) {
  // .................. eons
  let [
    ctlWen,
    eohalMars,
    eohalTextform,
    muonNatform,
    muonProps,
    renderSvg,
  ] = await Promise.all([
    __mapper('xs').c('wen'),
    __mapper('xs').e('mars'),
    __mapper('xs').e('textform'),
    __mapper('xs').m('natform'),
    __mapper('xs').m('props'),
    __mapper('xs').r('svg'),
  ])

  ctlWen.control(renderSvg.svg())
  
function getPathA() {
	return "M83,265L84,263.6C85,262.3,87,259.6,88.8,257.1C90.6,254.6,92.3,252.3,94.5,249.6C96.6,247,99.3,244,101.8,241C104.3,238,106.6,235,109.1,232.3C111.6,229.6,114.3,227.3,117.3,225.1C120.3,223,123.6,221,126.8,219.1C130,217.3,133,215.6,136,214C139,212.3,142,210.6,145.1,209.1C148.3,207.6,151.6,206.3,154.8,205.1C158,204,161,203,164.3,202.5C167.6,202,171.3,202,175.1,202C179,202,183,202,187,202C191,202,195,202,198.6,202.6C202.3,203.3,205.6,204.6,209,206.1C212.3,207.6,215.6,209.3,218.8,210.8C222,212.3,225,213.6,228,215.3C231,217,234,219,237.1,220.8C240.3,222.6,243.6,224.3,246.8,226.3C250,228.3,253,230.6,255.8,232.8C258.6,235,261.3,237,264.1,239.3C267,241.6,270,244.3,273,246.6C276,249,279,251,282,253C285,255,288,257,291,258.8C294,260.6,297,262.3,300.1,264C303.3,265.6,306.6,267.3,310.1,269C313.6,270.6,317.3,272.3,321.1,273.8C325,275.3,329,276.6,332.6,277.5C336.3,278.3,339.6,278.6,343.1,278.8C346.6,279,350.3,279,354.1,279C358,279,362,279,365.6,279C369.3,279,372.6,279,376,278.6C379.3,278.3,382.6,277.6,386,276.8C389.3,276,392.6,275,396.1,274C399.6,273,403.3,272,406.6,271C410,270,413,269,416.3,267.8C419.6,266.6,423.3,265.3,426.6,263.6C430,262,433,260,436.3,258.1C439.6,256.3,443.3,254.6,446.8,253C450.3,251.3,453.6,249.6,457.1,248C460.6,246.3,464.3,244.6,467.8,243C471.3,241.3,474.6,239.6,477.6,238.3C480.6,237,483.3,236,486.6,234.8C490,233.6,494,232.3,497.6,231.5C501.3,230.6,504.6,230.3,508,229.8C511.3,229.3,514.6,228.6,517.6,228.1C520.6,227.6,523.3,227.3,526.8,227C530.3,226.6,534.6,226.3,538.8,226.1C543,226,547,226,550.8,226.1C554.6,226.3,558.3,226.6,561.8,227.6C565.3,228.6,568.6,230.3,571.8,231.8C575,233.3,578,234.6,581,236.5C584,238.3,587,240.6,590,242.8C593,245,596,247,599,249C602,251,605,253,608,255.1C611,257.3,614,259.6,616.8,262C619.6,264.3,622.3,266.6,625.1,268.8C628,271,631,273,634.3,274.8C637.6,276.6,641.3,278.3,644.8,279.8C648.3,281.3,651.6,282.6,655,283.5C658.3,284.3,661.6,284.6,665.1,285C668.6,285.3,672.3,285.6,676,285.8C679.6,286,683.3,286,687,286C690.6,286,694.3,286,698,286.1C701.6,286.3,705.3,286.6,707.5,286.8C709.6,287,710.3,287,710.6,287L711,287"
}    

function getPath0() {
	return "M83,265L84,263.6C85,262.3,87,259.6,88.8,257.1C90.6,254.6,92.3,252.3,94.5,249.6C96.6,247,99.3,244,101.8,241C104.3,238,106.6,235,109.1,232.3C111.6,229.6,114.3,227.3,117.3,225.1C120.3,223,123.6,221,126.8,219.1C130,217.3,133,215.6,136,214C139,212.3,142,210.6,145.1,209.1C148.3,207.6,151.6,206.3,154.8,205.1C158,204,161,203,164.3,202.5C167.6,202,171.3,202,175.1,202C179,202,183,202,187,202C191,202,195,202,198.6,202.6C202.3,203.3,205.6,204.6,209,206.1C212.3,207.6,215.6,209.3,218.8,210.8C222,212.3,225,213.6,228,215.3C231,217,234,219,237.1,220.8C240.3,222.6,243.6,224.3,246.8,226.3C250,228.3,253,230.6,255.8,232.8C258.6,235,261.3,237,264.1,239.3C267,241.6,270,244.3,273,246.6C276,249,279,251,282,253C285,255,288,257,291,258.8L294,260.6"
}  
  
function getPath1() {
	return "M416.3,267.8C419.6,266.6,423.3,265.3,426.6,263.6C430,262,433,260,436.3,258.1C439.6,256.3,443.3,254.6,446.8,253C450.3,251.3,453.6,249.6,457.1,248C460.6,246.3,464.3,244.6,467.8,243C471.3,241.3,474.6,239.6,477.6,238.3C480.6,237,483.3,236,486.6,234.8C490,233.6,494,232.3,497.6,231.5C501.3,230.6,504.6,230.3,508,229.8C511.3,229.3,514.6,228.6,517.6,228.1C520.6,227.6,523.3,227.3,526.8,227C530.3,226.6,534.6,226.3,538.8,226.1C543,226,547,226,550.8,226.1C554.6,226.3,558.3,226.6,561.8,227.6C565.3,228.6,568.6,230.3,571.8,231.8C575,233.3,578,234.6,581,236.5C584,238.3,587,240.6,590,242.8C593,245,596,247,599,249C602,251,605,253,608,255.1C611,257.3,614,259.6,616.8,262C619.6,264.3,622.3,266.6,625.1,268.8C628,271,631,273,634.3,274.8C637.6,276.6,641.3,278.3,644.8,279.8C648.3,281.3,651.6,282.6,655,283.5C658.3,284.3,661.6,284.6,665.1,285C668.6,285.3,672.3,285.6,676,285.8C679.6,286,683.3,286,687,286C690.6,286,694.3,286,698,286.1C701.6,286.3,705.3,286.6,707.5,286.8C709.6,287,710.3,287,710.6,287L711,287"
}  
  
  let ani = function () {
    // .................. pics
    let eotim = {'td': 9800, 't0': 0, 't1': 1000, 't2': 1, 't3': 1, nostop: 1, tp: t => Math.sin((Math.PI / 2) * t)}

    

    let conformRed = {
      x: {
        'm1': 4, 'm2': 4, 'n1': 2, 'n2': 2, 'n3': 2, 'a': 1, 'b': 1, // circ
        'ra2': 106, 'v0': 0, 'v1': 1, 'w4': 0, 'seg5': 18, 'pa6': 0, 'pb7': -1,
        'dom3': [ [[[0,90]]], [[[2 * 360, 2 * 360 + 90]]] ],

        'fn0': (e,c) => e[0]
      },
      y: {
        'm1': 4, 'm2': 4, 'n1': 2, 'n2': 2, 'n3': 2, 'a': 1, 'b': 1, // circ
        'ra2': 106, 'v0': 0, 'v1': 1, 'w4': 0, 'seg5': 18, 'pa6': 0, 'pb7': -1,
        'dom3': [0, 360],

        'fn0': (e,c) => sin(e[0])

      }
    }
    
    let eocromRed = { 'csx': 1, 'cf': [[[ 333, 333, 333]]], 'co': [[[0.069, 0.06, 0.069]]],
      'cs': [[[333, 333, 333]]], 'cw': [[[1.3, 1.3, 1.3]]], 'cp': [[[0.99, 0.99]]]}

    // ............................. natAniRed
    let natAniRed = {
      eohal: 'mars',
      eotim,
      eoric: {gid: 'q', cid: 'q', fid: 'qred'},
      eofold: ani => {
        let natipros = {
          form: ani.eoform,        
          hvg: 0, // horizontal geodesics
          asyg: 1, // asymetric distribution of geodesics around the origin
          closeg: 0, // open line
        }        
        
        let res = muonNatform.natFeature(natipros)  // Feature.LineString

        return res
      },
      eomot: {
        proform: {
          projection: 'uniwen',
          scale: [ 0.2, 0.2 ],
          prerotate: [[[ ctlWen.rotation ]]],
          translate: [ -200,0,0 ],
          rotate: [0, 0, 0],
          lens: [0, 1, Infinity ],
        },
      },
      eocrom: eocromRed,
      eoform: conformRed,
      eoload: {},
    }    
    
    
    // .................. textAni
    let textAni0 = {

      eohal: 'textform',

      eofold: null,

      eotim: eotim,
      eoric: {'gid': 'text', 'cid': 'c0', 'fid': 'f0'},
      eocrom: { 'csx': 0, 'cf': [[[888, 777]]], 'cs': 111, 'cw': [[[0.1, 0.7]]], 'co': [[[0.6, 0.99]]], 'cp': [[[0.5, 0.5]]]},

      eomot: {
        proform: {
          projection: 'uniwen',
          translate: [ -250, 0 ],
        },
      },

      eoload: {
        textform: {
          string: 'sif who made the norse peopleâ€™s crops grow',
          style: {
            rotate: [[[ 0, 0 ]]],
            'font-size': [[[24, 24]]],
            'font-family': 'BankFuturistic',
            'text-anchor': 'center',
          },
          textpath: getPath0(),
        },
      },
    }

  // .................. textAni
    let textAni1 = {

      eohal: 'textform',

      eofold: null,

      eotim: eotim,
      eoric: {'gid': 'text', 'cid': 'c1', 'fid': 'f1'},
      eocrom: { 'csx': 0, 'cf': [[[888, 777]]], 'cs': 111, 'cw': [[[0.1, 0.7]]], 'co': [[[0.6, 0.99]]], 'cp': [[[0.5, 0.5]]]},

      eomot: {
        proform: {
          projection: 'uniwen',
          translate: [ -250, 0 ],
        },
      },

      eoload: {
        textform: {
          string: 'sif who made the norse peopleâ€™s crops grow',
          style: {
            rotate: [[[ 0, 0 ]]],
            'font-size': [[[24, 24]]],
            'font-family': 'BankFuturistic',
            'text-anchor': 'center',
          },
          textpath: getPath1(),
        },
      },
    }

    // .................. textAniA
    let textAniA = {

      eohal: 'textform',

      eofold: null,

      eotim: eotim,
      eoric: {'gid': 'text', 'cid': 'ca', 'fid': 'fa'},
      eocrom: { 'csx': 0, 'cf': [[[888, 777]]], 'cs': 111, 'cw': [[[0.1, 0.7]]], 'co': [[[0.6, 0.99]]], 'cp': [[[0.5, 0.5]]]},

      eomot: {
        proform: {
          projection: 'uniwen',
          translate: [ -250, -60 ],
        },
      },

      eoload: {
        textform: {
          string: 'sif mother of the obscure ullr',
          style: {
            rotate: [[[ 0, 0 ]]],
            'font-size': [[[24, 24]]],
            'font-family': 'BankFuturistic',
            'text-anchor': 'center',

          },
        },

      },
    }
    // .................. animas
    let animas = [

      // textAni0, // h.text
      // textAni1, // h.text
      textAniA, // h.text

    ]

    return animas
  }

  let enty = () => {}
  enty.ani = ani
  return enty
}
</script>
