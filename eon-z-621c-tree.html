<script src="eon-x-eonify.js"></script>
<script>
window.xEonify.eon({anitem, time: undefined})

// .................. anitem
async function anitem (__mapper) {
  // .................. eons
  let [
    ctlWen,
    eohalMars,
    eohalSol,
    muonProps,
    muonSoma,
    renderSvg,  
  ] = await Promise.all([
    __mapper('xs').c('wen'),
    __mapper('xs').e('mars'),
    __mapper('xs').e('sol'),
    __mapper('xs').m('props'),
    __mapper('xs').m('soma'),
    __mapper('xs').r('svg'), 
  ])

  let muonStore = __mapper('muonStore')

  // .................. animas
  let ani = function () {

 
    let p0 = {
            eocrom: {csx: 3, cf: 555, cs: 111, cw: 6.9, co: 0.0072, cp: 0.99},
            x0: -40, y0: -100,

            growthDir: [[[1 * Math.PI / 2 ,  1 * Math.PI / 2 ]]],

            depth: [[[0, 9]]], // [[[0, 12]]], // depth iter

            growunit: 2, // rate of feature growth in tick
            maxSpreadAngle: 1 * Math.PI / 2, // max abs ang delta
            mitoDirections: [ -1.1, 0.1, 0.9 ], // [ -1.1, 0.9 ], // deviations

            shrinkage: 0.7, // 0.9, // size shrink
            colordelta: 160, // 100, // color delta between gens

            subgrow: 1, // inside growth
            subgrowunit: 0.3, // rate of feature growth in tick
            subSpreadAngle: Math.PI / 6, // width of secondary deviation
            subMitoDirs: [0.1], // direction in stems
            subShrinkage: 0.9, // size shrink
            subgrowrate: (i,q) => 8 * (q - Math.abs(i - (q /2))) / q

        } 
 
    let p1 = { 
            eocrom: {csx: 2, cf: 555, cs: 111, cw: 6.9, co: 0.0072, cp: 0.99},
            x0: 40, y0: -90,
            growthDir: Math.PI / 2,

            depth: [[[0, 12]]], // [[[0, 12]]], // depth iter

            growunit: 2, // rate of feature growth in tick
            maxSpreadAngle: 1 * Math.PI / 2, // max abs ang delta
            mitoDirections: [ -1.1, 0.9 ], // [ -1.1, 0.9 ], // deviations

            shrinkage: 0.8, // 0.9, // size shrink
            colordelta: 100, // 100, // color delta between gens

            subgrow: 1, // inside growth
            subgrowunit: 2, // rate of feature growth in tick
            subSpreadAngle: - Math.PI / 9, // width of secondary deviation
            subMitoDirs: [0.1], // direction in stems
            subShrinkage: 0.9, // size shrink
            subgrowrate: (i,q) => 1
    }      


    // .................. animas
    let animas = [

      muonSoma.soma(1,p0), // h.mars
      muonSoma.soma(2,p1), // h.mars

    ]

    return animas
  }

  let enty = () => {}
  enty.ani = ani
  return enty
}
</script>
