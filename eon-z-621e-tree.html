<script src="eon-x-eonify.js"></script>
<script>
window.xEonify.eon({anitem, time: undefined})

// .................. anitem
async function anitem (__mapper) {
  // .................. eons
  let [
    ctlWen,
    eohalMars,
    eohalSol,
    muonProps,
    muonSoma,
    renderSvg,
  ] = await Promise.all([
    __mapper('xs').c('wen'),
    __mapper('xs').e('mars'),
    __mapper('xs').e('sol'),
    __mapper('xs').m('props'),
    __mapper('xs').m('soma'),
    __mapper('xs').r('svg'),
  ])

  let muonStore = __mapper('muonStore')

  // .................. animas
  let ani = function () {

    let p = {
      eocrom: {csx: 2, cf: 555, cs: 111, cw: 6.9, co: 0.0072, cp: [[[0.69, 0.69, 0.99, 0.99]]]},
      x0: 0, y0: -160,
      growthDir: Math.PI / 2,

      depth: [[[0, 10]]], // [[[0, 12]]], // depth iter

      growunit: 2, // rate of feature growth in tick
      maxSpreadAngle: 1 * Math.PI / 2, // max abs ang delta
      mitoDirections: [ -1.1, 0, 0.9 ], // [ -1.1, 0.9 ], // number of deviations

      shrinkage: 0.8, // 0.9, // size shrink
      colordelta: 100, // 100, // color delta between gens

      subgrow: 1, // inside growth
      subgrowunit: [1,0.1,1], // rate of feature growth in tick
      subSpreadAngle: Math.PI / 12, // width of secondary deviation
      subMitoDirs: [0.1], // direction in stems
      subShrinkage: 0.9, // size shrink
      subgrowrate: (i, q) => 1,
    }

    // .................. animas
    let q = 1
    let animas = []
    for (let i = 0; i < q; i++) {
      let pi = muonProps.clone(p)
      animas[i] = muonSoma.soma(i, pi)
    }

    return animas
  }

  let enty = () => {}
  enty.ani = ani
  return enty
}
</script>
