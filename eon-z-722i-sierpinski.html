<script src="eon-x-eonify.js"></script>
<script>
window.xEonify.eon({anitem, time: undefined})

// .................. anitem
async function anitem (__mapper) {
  // .................. eons
  let [
    ctlWen,
    eohalMars,
    muonGeoj,
    muonLindenmayer,
    prtUniwen,
    renderSvg,
  ] = await Promise.all([
    __mapper('xs').c('wen'),
    __mapper('xs').e('mars'),
    __mapper('xs').m('geoj'),
    __mapper('xs').m('lindenmayer'),
    __mapper('xs').p('uniwen'),
    __mapper('xs').r('svg'),
  ])

  // .................. animas
  let ani = function () {
    let ctl = ctlWen().control(renderSvg.svg())

    let aniForm = {

      eotim: { td: 24200, t0: 0, t1: 1000, t2: 1, t3: 1, nostop: 1 },
      eoric: { gid: 'ani', cid: 'ani', fid: 'ani' },
      eohal: 'mars',

      eofold: ani => {
        let gj = muonLindenmayer.lindenmayer(ani.eoload.lindenmayer)
        return muonGeoj.timeSeg(gj, ani.eotim.unitElapsed)   // return gj
       
      },

      eocrom: { 'csx': 0, 'cf': [[[444, 666]]], 'cs': 666, 'cw': [[[0.9, 0.9]]], 'co': [[[0.1, 0.2]]], 'cp': [[[0.9, 0.9]]]},
      eomot: {
        proform: {
          projection: 'uniwen',
          scale: 1,
          translate: {'x': 0, 'y': 0 },
          prerotate: [[[ ctl.rotation ]]],
          rotate: [ 0, 0, 0 ],
        },
      },
      eoload: {

        // lindenmayer: { // sierpinski
        // linden: {
        // axiom: 'F',
        // steps: 8,
        // rules: {
        // F: 'f+F+f',
        // f: 'F-f-F',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 60,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // dragon
        // linden: {
        // axiom: 'FX',
        // steps: 8,
        // rules: {
        // Y: '+FX--FY+',
        // X: '-FX++FY-',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 45,
        // anglestart: 45,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // fass1
        // linden: {
        // axiom: '-L',
        // steps: 8,
        // rules: {
        // Y: '+FX--FY+',
        // X: '-FX++FY-',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 90,
        // anglestart: 90,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // gosper
        // linden: {
        // axiom: '-FR',
        // steps: 3,
        // rules: {
        // L: 'FLFL-FR-FR+FL+FL-FR-FRFL+FR+FLFLFR-FL+FR+FLFL+FR-FLFR-FR-FL+FL+FRFR-',
        // R: '+FLFL-FR-FR+FL+FLFR+FL-FRFR-FL-FR+FLFRFR-FL-FRFL+FL+FR-FR-FL+FL+FRFR',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 90,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // gosper
        // linden: {
        // axiom: 'F++F++F++F',
        // steps: 7,
        // rules: {
        // F: 'F+F-F',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 45,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // penrose1
        // linden: {
        // axiom: '+WF--XF---YF--ZF',
        // steps: 0,
        // rules: {
        // W: 'YF++ZF----XF[-YF----WF]++',
        // X: '+YF--ZF[---WF--XF]+',
        // Y: '-WF++XF[+++YF++ZF]-',
        // Z: '--YF++++WF[+ZF++++XF]--XF',
        // },
        // },
        // mayer: {
        // side: 6,
        // angle: 36,
        // anglestart: 0,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // plant1
        // linden: {
        // axiom: 'X',
        // steps: 3,
        // rules: {
        // X: 'F[-X]F[-X]+F[X]',
        // F: 'FF',
        // },
        // },
        // mayer: {
        // side: 6,
        // angle: 36,
        // startAngle: 0,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // treegrid
        // linden: {
        // axiom: 'X',
        // steps: 3,
        // rules: {
        // X: 'FY[+FY][--FY]FY',
        // F: 'FX[++FX][-FX]FX',
        // },
        // },
        // mayer: {
        // side: 6,
        // angle: 60,
        // startAngle: 0,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // sierpinski
        // linden: {
        // axiom: 'FXF--FF--FF',
        // steps: 6,
        // rules: {
        // F: 'FF',
        // X: '--FXF++FXF++FXF--',
        // },
        // },
        // mayer: {
        // side: 6,
        // angle: 60,
        // startAngle: 0,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // snake
        // linden: {
        // axiom: 'FL',
        // steps: 3,
        // rules: {
        // L: 'FL-FR--FR+FL++FLFL+FR-',
        // R: '+FL-FRFR--FR-FL++FL+FR',
        // },
        // },
        // mayer: {
        // side: 4,
        // angle: 60,
        // startAngle: 0,
        // start: [-100,-100],
        // }
        // },

        // lindenmayer: {  // Koch Island.
        // linden: {
        // axiom: '-F--F--F',
        // steps: 5,
        // rules: {
        // F: 'F+F--F+F',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 60,
        // anglestart:   0,
        // start: [0,0],
        // }
        // },

        // lindenmayer: {  // Koch Island.
        // linden: {
        // axiom: 'F ',
        // steps: 5,
        // rules: {
        // F: 'F[+F][-F]',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 20,
        // anglestart: 0,
        // start: [0,0],
        // randomizeStep: 20,  // %
        // randomizeAngle: 20   // %
        // }
        // },

        // lindenmayer: {  // Lawrence
        // linden: {
        // axiom: 'W',
        // steps: 7,
        // rules: {
        // W: '+++X--F--ZFX+',
        // X: '---W++F++YFW-',
        // Y: '+ZFX--F--Z+++',
        // Z: '-YFW++F++Y---',
        // },
        // },
        // mayer: {
        // side: 2,
        // angle: 30,
        // anglestart: 30,
        // start: [0,0],
        // }
        // },

        lindenmayer: { // Penrose3
          linden: {
            axiom: '[N]++[N]++[N]++[N]++[N]',
            steps: 4,
            rules: {
              M: 'OF++PF----NF[-OF----MF]++',
              N: '+OF--PF[---MF--NF]+',
              O: '-MF++NF[+++OF++PF]-',
              P: '--OF++++MF[+PF++++NF]--NF',
              F: '',
            },
          },
          mayer: {
            side: 24,
            angle: 36,
            anglestart: 0,
            start: [0, 0],
          },
        },

      },
    }

    // .................. animas
    let animas = [
      aniForm, // h.mars
    ]
    return animas
  }

  let enty = () => {}
  enty.ani = ani
  return enty
}
</script>